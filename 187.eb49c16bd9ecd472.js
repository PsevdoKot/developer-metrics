"use strict";(self.webpackChunkdevelopers_metriks=self.webpackChunkdevelopers_metriks||[]).push([[187],{2187:(Y,g,a)=>{a.r(g),a.d(g,{CompareModule:()=>k});var u=a(6895),p=a(2531),e=a(1571),l=a(1135),f=a(3900),v=a(4671),h=a(5698),b=a(9300),S=a(207),Z=a(4128),U=a(4004),x=a(262),y=a(3687),A=a(3998);let c=(()=>{class t{constructor(r,s){this.gitlabService=r,this.statisticService=s,this.userStats=new l.X([]),this.userStats$=this.userStats.asObservable(),this.searchUsers=new l.X([]),this.searchUsers$=this.searchUsers.asObservable(),this._isLoadingSearch=new l.X(!1),this._isLoadingUserStats=new l.X(!1),this.isLoadingSearch$=this._isLoadingSearch.asObservable(),this.isLoadingUserStats$=this._isLoadingUserStats.asObservable()}findSearchUsers(r){this._isLoadingSearch.next(!0),this.searchUsers.next([]),this.gitlabService.getUsers(r).pipe(function C(){return(0,f.w)(v.y)}(),(0,h.q)(20),(0,b.h)(s=>!this.userStats.value.some(i=>i.id===s.id)),(0,h.q)(5),(0,S.u)((s,i)=>[...s,i],[])).subscribe(s=>{this.searchUsers.next(s),this._isLoadingSearch.next(!1)})}addUserToCompare(r){this.searchUsers.next([]),this._isLoadingUserStats.next(!0),(0,Z.D)([this.statisticService.getCommitsCount(r.id),this.statisticService.getMostActiveWeekDay(r.id),this.statisticService.getEditingStats(r.id),this.statisticService.getReviewsCount(r.id)]).pipe((0,U.U)(([s,i,d,m])=>({id:r.id,username:r.username,avatar_url:r.avatar_url,mostActiveWeekday:i,commitsCount:s,editStats:d,reviewsCount:m})),(0,x.K)(s=>{throw this._isLoadingUserStats.next(!1),"bad"})).subscribe(s=>{this.userStats.next([...this.userStats.value,s]),this._isLoadingUserStats.next(!1)})}deleteUser(r){console.log(this.userStats.value.filter(s=>s.id===r)),this.userStats.next(this.userStats.value.filter(s=>s.id!==r))}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(y.l),e.LFG(A._))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var n=a(4006);let T=(()=>{class t{constructor(r){this.compareService=r}ngOnInit(){this.form=new n.cw({search:new n.NI("",n.kI.required)})}submit(){this.compareService.findSearchUsers(this.form.value)}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-compare-search"]],decls:7,vars:1,consts:[[1,"mb-10",3,"formGroup","submit"],[1,"text-2xl","font-semibold","mb-4"],[1,"flex","gap-2","flex-wrap","items-stretch","justify-stretch"],["formControlName","search","name","search","id","search",1,"border-2","rounded-lg","p-2","text-xl","flex-1","sm:w-4/6","md:w-5/6"],["type","submit",1,"flex-2","border","border-green-500","rounded-lg","py-2","px-4","text-xl","sm:w-2/6","md:w-1/6","bg-green-500","text-white","font-semibold","w-full","hover:bg-green-400","transition-colors"]],template:function(r,s){1&r&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return s.submit()}),e.TgZ(1,"h2",1),e._uU(2,"\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"input",3),e.TgZ(5,"button",4),e._uU(6," \u041f\u043e\u0438\u0441\u043a "),e.qZA()()()),2&r&&e.Q6J("formGroup",s.form)},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],encapsulation:2}),t})();function L(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"li",3),e.NdJ("click",function(){const d=e.CHM(r).$implicit,m=e.oxw();return e.KtG(m.addUserToCompare(d))}),e._UZ(1,"img",4),e.TgZ(2,"p",5),e._uU(3),e.qZA(),e.TgZ(4,"p",5),e._uU(5),e.qZA()()}if(2&t){const r=o.$implicit;e.xp6(1),e.Q6J("src",r.avatar_url,e.LSH),e.xp6(2),e.Oqu(r.username),e.xp6(2),e.Oqu(r.name)}}function w(t,o){1&t&&(e.TgZ(0,"li",6),e._uU(1," \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 "),e.qZA())}let D=(()=>{class t{constructor(r){this.compareService=r}addUserToCompare(r){this.compareService.addUserToCompare(r)}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-search-list"]],decls:5,vars:6,consts:[[1,"flex","flex-col","shrink-0","mb-8"],["class","grid grid-cols-5 sm:grid-cols-7 border-t-2 border-l-2 border-r-2 overflow-hidden last:border-b-2 first:rounded-t-lg last:rounded-b-lg p-2 items-center shrink-0 hover:bg-gray-200 transition-colors cursor-pointer",3,"click",4,"ngFor","ngForOf"],["class","flex border-t-2 border-l-2 border-r-2 last:border-b-2 first:rounded-t-lg last:rounded-b-lg p-2 py-4 items-center shrink-0 hover:bg-gray-200 transition-colors cursor-pointer animate-pulse bg-gray-200",4,"ngIf"],[1,"grid","grid-cols-5","sm:grid-cols-7","border-t-2","border-l-2","border-r-2","overflow-hidden","last:border-b-2","first:rounded-t-lg","last:rounded-b-lg","p-2","items-center","shrink-0","hover:bg-gray-200","transition-colors","cursor-pointer",3,"click"],["alt","user-logo",1,"h-10","aspect-square","row-span-2","sm:row-span-1",3,"src"],[1,"col-span-3"],[1,"flex","border-t-2","border-l-2","border-r-2","last:border-b-2","first:rounded-t-lg","last:rounded-b-lg","p-2","py-4","items-center","shrink-0","hover:bg-gray-200","transition-colors","cursor-pointer","animate-pulse","bg-gray-200"]],template:function(r,s){1&r&&(e.TgZ(0,"ul",0),e.YNc(1,L,6,3,"li",1),e.ALo(2,"async"),e.YNc(3,w,2,0,"li",2),e.ALo(4,"async"),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,s.compareService.searchUsers$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,s.compareService.isLoadingSearch$)))},dependencies:[u.sg,u.O5,u.Ov],encapsulation:2}),t})();var F=a(7035);const q=function(t){return["/users","user",t]};let J=(()=>{class t{constructor(r){this.compareService=r}deleteUser(r){this.compareService.deleteUser(r),console.log(r)}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-compare-user"]],inputs:{userData:"userData"},decls:23,vars:11,consts:[["alt","user-logo",1,"w-36","rounded-full","border","mx-auto","col-span-4","mb-4","cursor-pointer","hover:scale-105","transition-transform",3,"src","routerLink"],[1,"col-span-4","text-4xl","font-semibold","text-center","mb-2"],[1,"col-span-2"],[1,"col-span-3","my-1"],[1,"col-span-4","grid","grid-cols-4"],[1,"col-span-3"],[1,"col-span-1"],[1,"bg-red-400","col-span-4","mt-2","py-1","rounded-2xl","border","border-red-400","hover:bg-white","hover:text-red-400","transition-colors",3,"click"]],template:function(r,s){1&r&&(e._UZ(0,"img",0),e.TgZ(1,"h2",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"h3"),e._uU(5,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0441\u0442\u0440\u043e\u043a"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",2)(8,"h3"),e._uU(9,"\u0423\u0434\u0430\u043b\u0435\u043d\u043e \u0441\u0442\u0440\u043e\u043a"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"div",3)(12,"h3"),e._uU(13,"\u0421\u0430\u043c\u044b\u0439 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043d\u044c"),e.qZA(),e._uU(14),e.ALo(15,"weekday"),e.qZA(),e.TgZ(16,"div",4)(17,"h3",5),e._uU(18,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u0434-\u0440\u0435\u0432\u044c\u044e"),e.qZA(),e.TgZ(19,"p",6),e._uU(20),e.qZA()(),e.TgZ(21,"button",7),e.NdJ("click",function(){return s.deleteUser(s.userData.id)}),e._uU(22," \u0423\u0434\u0430\u043b\u0438\u0442\u044c\n"),e.qZA()),2&r&&(e.Q6J("src",s.userData.avatar_url,e.LSH)("routerLink",e.VKq(9,q,s.userData.username)),e.xp6(2),e.hij(" ",s.userData.username,"\n"),e.xp6(4),e.hij(" ",s.userData.editStats[0],"\n"),e.xp6(4),e.hij(" ",s.userData.editStats[1],"\n"),e.xp6(4),e.hij(" ",e.lcZ(15,7,s.userData.mostActiveWeekday),"\n"),e.xp6(6),e.Oqu(s.userData.reviewsCount))},dependencies:[p.rH,F.q],encapsulation:2}),t})();function O(t,o){1&t&&e._UZ(0,"app-compare-user",3),2&t&&e.Q6J("userData",o.$implicit)}function _(t,o){1&t&&(e.TgZ(0,"div",4),e._UZ(1,"div",5),e.TgZ(2,"h2",6),e._uU(3," \u2800 "),e.qZA(),e.TgZ(4,"div",7)(5,"h3"),e._uU(6,"\u2800"),e.qZA(),e.TgZ(7,"h3"),e._uU(8,"\u2800"),e.qZA()(),e.TgZ(9,"div",7)(10,"h3"),e._uU(11,"\u2800"),e.qZA(),e.TgZ(12,"h3"),e._uU(13,"\u2800"),e.qZA()(),e.TgZ(14,"div",8)(15,"h3"),e._uU(16,"\u2800"),e.qZA(),e.TgZ(17,"h3"),e._uU(18,"\u2800"),e.qZA()(),e.TgZ(19,"div",9)(20,"h3",10),e._uU(21,"\u2800"),e.qZA(),e.TgZ(22,"h3",10),e._uU(23,"\u2800"),e.qZA()(),e.TgZ(24,"button",11),e._uU(25," \u2800 "),e.qZA()())}let E=(()=>{class t{constructor(r){this.compareService=r}ngOnInit(){this.compareService.userStats$.subscribe(r=>{this.userStats=r})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-compare-list"]],decls:5,vars:6,consts:[[1,"grid","grid-cols-1","gap-8","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4"],["class","p-6 rounded-2xl shadow-2xl grid grid-cols-4 overflow-hidden",3,"userData",4,"ngFor","ngForOf"],["class","p-6 rounded-2xl shadow-2xl grid grid-cols-4 overflow-hidden",4,"ngIf"],[1,"p-6","rounded-2xl","shadow-2xl","grid","grid-cols-4","overflow-hidden",3,"userData"],[1,"p-6","rounded-2xl","shadow-2xl","grid","grid-cols-4","overflow-hidden"],["alt","user-logo",1,"w-36","h-36","bg-gray-300","animate-pulse","rounded-full","border","mx-auto","col-span-4","mb-4","cursor-pointer","hover:scale-105","transition-transform"],[1,"col-span-4","text-4xl","font-semibold","text-center","mb-2","bg-gray-300","animate-pulse","rounded-2xl"],[1,"col-span-2","bg-gray-300","animate-pulse","rounded-2xl"],[1,"col-span-4","my-1","bg-gray-300","animate-pulse","rounded-2xl"],[1,"col-span-4","grid","grid-cols-4","bg-gray-300","animate-pulse","rounded-2xl"],[1,"col-span-3"],[1,"bg-gray-300","animate-pulse","col-span-4","mt-2","py-1","rounded-2xl","border","border-gray-300"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0),e.YNc(1,O,1,1,"app-compare-user",1),e.ALo(2,"async"),e.YNc(3,_,26,0,"div",2),e.ALo(4,"async"),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,s.compareService.userStats$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,s.compareService.isLoadingUserStats$)))},dependencies:[u.sg,u.O5,J,u.Ov],encapsulation:2}),t})();const B=[{path:"",component:(()=>{class t{constructor(r){this.compareService=r}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-compare"]],decls:3,vars:0,template:function(r,s){1&r&&e._UZ(0,"app-compare-search")(1,"app-search-list")(2,"app-compare-list")},dependencies:[T,D,E]}),t})()}];let $=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(B),p.Bz]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,$,n.UX]}),t})()}}]);